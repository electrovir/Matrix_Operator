<link rel="import" href="../../../../bower_components/polymer/polymer.html">

<dom-module id="matrix-controls">
  <!-- <style>
    :host {
      display: flex;
      flex-direction: column;
    }
    
    .control-row {
      box-sizing: border-box;
      width: 100%;
      
      display: flex;
      justify-content: center;
      flex-grow: 1;
      
      border-color: inherit;
      border-style: inherit;
      border-width: 0;
    }
    
    .control-row > div {
      background: linear-gradient(to bottom, hsla(240, 30%, 10%, 0.8), hsla(240, 100%, 2%, 0.8) );
      
      border-color: inherit;
      border-style: inherit;
      border-width: 2px;
      border-radius: 5px;
      
      box-sizing: border-box;
      margin: 5px;
      padding: 2px;
      max-width: 100px;
      min-height: 35px;
      
      
      display: flex;
      justify-content: center;
      align-items: center;
      flex-basis: 0;
      flex-grow: 1;
      
      color: white;
      text-align: center;
      font-family: "Arial";
      font-size: 1em;
      text-transform: uppercase;
      text-shadow: 0px 3px 10px rgba(0,0,0,0.2),
                   0px 5px 2px rgba(0,0,0,0.15),
                   0px 7px 30px rgba(0,0,0,0.15),
                   0px 0px 1px  #FFF;
      
      cursor: pointer;
      
      -webkit-touch-callout: none; /* iOS Safari */
      -webkit-user-select: none;   /* Chrome/Safari/Opera */
      -khtml-user-select: none;    /* Konqueror */
      -moz-user-select: none;      /* Firefox */
      -ms-user-select: none;       /* Internet Explorer/Edge */
      user-select: none;
    }
    
    .control-row > div:hover {
      background: linear-gradient(to bottom, hsla(195, 30%, 25%, 0.8), hsla(195, 20%, 30%, 0.8) );
    }
    
    .control-row > div:active {
      padding-top: 4px;
      padding-bottom: 0;
      
      box-shadow: inset 0 1px 2px 0px rgba(0, 0, 0, 0.5);
      
      text-shadow: 0px 2px 10px rgba(0,0,0,0.25),
                   0px 4px 2px rgba(0,0,0,0.2),
                   0px 6px 30px rgba(0,0,0,0.2);
      
    }
    
    
    @media (max-width: 800px), (max-height: 600px) {
      :host {
        background: linear-gradient(to bottom, hsla(195, 30%, 10%, 0.9), hsla(195, 80%, 2%, 0.9) );
      }
      .control-row > div {
        background: none;
        
        border-radius: 0;
        border-width: 0;
        border-color: inherit;
        
        box-shadow: none;
        
        margin: 0;
        max-width: none;
        min-height: none;
      }
      
      .control-row > div:hover {
        background: hsla(195, 10%, 50%, 0.8);
      }
      
      .control-row > div + div {
        border-left-width: 3px;
      }
      
      .control-row + .control-row {
        border-top-width: 2px;
      }
    }
    
    
  </style> -->
  <style>
    .multiple-entry {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      position: absolute;
      height: 100%;
      width: 100%;
      /*background-color: hsla(0, 0%, 0%, .9);*/
      transition: visibility 0 ease-in-out, opacity .2s ease-in-out;
    }
    .multiple-entry input {
      flex-grow: 1;
      width: 200px;
      max-width: 90%;
    }
    .multiple-entry form {
      padding: 10px;
      display: flex;
      flex-grow: 1;
      flex-direction: column;
      align-items: center;
    }
    .multiple-entry.hidden-multiple {
      z-index: -50;
      visibility: hidden;
      opacity: 0;
    }
    .multiple-entry.shown-multiple {
      z-index: 99;
      visibility: visible;
      opacity: 1;
    }
    
    .shown-multiple ~ div {
      transition: opacity .2s ease-in-out;
      opacity: .07;
    }
    /*.multiple-entry ~ .control-row > div {
      color: purple;
    }*/
  </style>
  <template>
    <div id="multiple-entry" class="multiple-entry hidden-multiple">
      <form action="dothing();" onsubmit="dothing();">
        <input oninput="console.log();" id="multiple-input" placeholder="Multiple">
      </form>
    </div>
    
    <div class="control-row">
      <div onclick="store.dispatch( {type: 'undo'} )">
        Undo
      </div>
      <div>
        Check
      </div>
      <div onclick="store.dispatch( {type: 'redo'} )">
        Redo
      </div>
    </div>
    
    <div class="control-row">
      <div onclick="store.dispatch( {type: 'add row'} )">
        + Row
      </div>
      <div onclick="store.dispatch( {type: 'add column'} )">
        + Col
      </div>
    </div>
    
    <div class="control-row">
      <div onclick="store.dispatch( {type: 'remove row'} )">
        - Row
      </div>
      <div onclick="store.dispatch( {type: 'remove column'} )">
        - Col
      </div>
    </div>
    
    <div class="control-row">
      <div onclick="store.dispatch( {type: 'help'} )">
        Help
      </div>
      <div onclick="store.dispatch( {type: 'reset to original'} )">
        Reset
      </div>
      <div onclick="store.dispatch( {type: 'clear'} )">
        Clear
      </div>
    </div>
  </template>
  
  <script>
  Polymer ({
    is: 'matrix-controls',
    attached: function() {
      this.querySelector('#multiple-input').addEventListener('input', function(event) {
        event.stopPropagation();
        
        store.dispatch({type: 'set multiple', multiple: event.target.value});
      }, false)
    }
  });
  
  </script>
  
</dom-module>